{% extends 'ctflex/base.html' %}
{% load static from staticfiles %}
{% load formfield from ctflex %}
{% load widget_tweaks %}

{% block title %}
  Login — {{ block.super }}
{% endblock %}

{% block header %}
  Login
{% endblock %}


{% block content %}

  {% if next %}
    {% if user.is_authenticated %}
      <p>You are authenticated as {{ request.user.username }}, but are not authorized to access this page. Would you like to login to a different account?</p>
    {% else %}
      <p>Please login to see this page.</p>
    {% endif %}
  {% else %}
    <p>If you don't already have an account, <a href="{% url 'ctflex:register' %}">sign up</a>!</p>
  {% endif %}

  <p>Lost your password? <a href="{% url 'ctflex:password_reset' %}">Reset it.</a></p>

  {# TODO: Make form horizontal #}
  <form method="post" role="form">
    {% csrf_token %}

    {% include 'ctflex/snippets/form_non_field_errors.html' %}

    {% formfield form.username %}{% endformfield %}
    {% formfield form.password %}{% endformfield %}

    {#    <div class="container">#}
    {#      <form class="form-horizontal" role="form">#}
    {#        <div class="form-group">#}
    {#          <div class="col-sm-3">#}
    {#            {% formfield form.username %}{% endformfield %}#}
    {#          </div>#}
    {#        </div>#}
    {#        <div class="form-group">#}
    {#          <div class="col-sm-3">#}
    {#            {% formfield form.password %}{% endformfield %}#}
    {#          </div>#}
    {#        </div>#}
    {#        <br>#}
    {#        <div class="col-sm-offset-4 col-sm-4">#}
    {#          <div class="btn-group btn-group-justified" role="group">#}
    {#            <a role="button" type="submit" class="btn btn-primary" id="login">Login</a>#}
    {#            <a role="button" type="submit" class="btn btn-default" id="reset">Reset Password</a>#}
    {#          </div>#}
    {#        </div>#}
    {#      </form>#}
    {#      <br>#}
    {#      <br>#}
    {#      <hr>#}
    {#    </div>#}

    <input type="hidden" name="next" value="{{ next }}"/>

    <input class="btn btn-primary" type="submit" value="Log in"/>

    <script type="text/javascript">document.getElementById("id_username").focus();</script>

  </form>

{% endblock %}
